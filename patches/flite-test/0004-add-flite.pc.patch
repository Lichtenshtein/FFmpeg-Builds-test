From c9e1172da7ca4447af32ac5a60907a5b7593084d Mon Sep 17 00:00:00 2001
From: Hamid Maadani <hamid@dexo.tech>
Date: Fri, 29 Aug 2025 19:00:42 -0700
Subject: [PATCH] add flite.pc

---
 Makefile     |  2 ++
 configure.in |  2 +-
 flite.pc.in  | 12 ++++++++++++
 3 files changed, 15 insertions(+), 1 deletion(-)
 create mode 100644 flite.pc.in

diff --git a/Makefile b/Makefile
index 511f8cf..60e80c3 100644
--- a/Makefile
+++ b/Makefile
@@ -109,7 +109,9 @@ install:
 	mkdir -p $(DESTDIR)$(INSTALLBINDIR)
 	mkdir -p $(DESTDIR)$(INSTALLLIBDIR)
 	mkdir -p $(DESTDIR)$(INSTALLINCDIR)
+	mkdir -p $(DESTDIR)$(INSTALLLIBDIR)/pkgconfig/
 	$(INSTALL) -m 644 include/*.h $(DESTDIR)$(INSTALLINCDIR)
+	$(INSTALL) -m 755 flite.pc $(DESTDIR)$(INSTALLLIBDIR)/pkgconfig/
 	@ $(MAKE) -C main --no-print-directory DESTDIR=$(DESTDIR) install
 
 time-stamp :
diff --git a/configure.in b/configure.in
index 5a0649a..c4f03ee 100644
--- a/configure.in
+++ b/configure.in
@@ -496,4 +496,4 @@ AC_ARG_WITH( langvox,
         FL_LANGVOX=$with_langvox )
 AC_SUBST(FL_LANGVOX)
 
-AC_OUTPUT(config/config config/system.mak)
+AC_OUTPUT(config/config config/system.mak flite.pc)
diff --git a/flite.pc.in b/flite.pc.in
new file mode 100644
index 0000000..b49c644
--- /dev/null
+++ b/flite.pc.in
@@ -0,0 +1,12 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: flite
+Description: a text to speech library
+Requires:
+Version: 2.3.0
+Libs: -L${libdir} -lflite -lflite_cmu_grapheme_lang -lflite_cmu_grapheme_lex -lflite_cmu_indic_lang -lflite_cmu_indic_lex -lflite_cmulex -lflite_cmu_time_awb -lflite_cmu_us_awb -lflite_cmu_us_kal16 -lflite_cmu_us_kal -lflite_cmu_us_rms -lflite_cmu_us_slt -lflite_usenglish
+Libs.private: -lm
+Cflags: -I${includedir}/flite/
